CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

PROJECT(DemoApplication)

FUNCTION(MY_FIND_PATH module filename)
	FIND_PATH(${module} ${filename}
		PATH_SUFFIXES include
		PATHS
			/opt
			/usr
			/usr/local
	)
ENDFUNCTION(MY_FIND_PATH module filename)

FUNCTION(MY_FIND_LIBRARY module filename)
	FIND_LIBRARY(${module} ${filename}
		PATH_SUFFIXES
			lib
			lib64
		PATHS
			/opt
			/usr
			/usr/local
	)
ENDFUNCTION(MY_FIND_LIBRARY module filename)


MY_FIND_PATH(GLEW_INCLUDE_DIR GL/glew.h)
MY_FIND_PATH(GLFW_INCLUDE_DIR GLFW/glfw3.h)
MY_FIND_PATH(GLIMAGE_INCLUDE_DIR glimg/glimg.h)
MY_FIND_PATH(GLM_INCLUDE_DIR glm/glm.hpp)
MY_FIND_PATH(BOOST_INCLUDE_DIR boost/smart_ptr/shared_ptr.hpp)
MY_FIND_PATH(ASSIMP_INCLUDE_DIR assimp/mesh.h)
MY_FIND_PATH(ANTTWEAKBAR_INCLUDE_DIR AntTweakBar.h)


MY_FIND_LIBRARY(GLEW_LIBRARY GLEW)

MY_FIND_LIBRARY(GLFW_LIBRARY glfw3)
IF(NOT GLFW_LIBRARY)
  MY_FIND_LIBRARY(GLFW_LIBRARY glfw)
ENDIF(NOT GLFW_LIBRARY)

MY_FIND_LIBRARY(GLIMAGE_LIBRARY glimg)
MY_FIND_LIBRARY(GLIMAGE_LIBRARY_DEBUG glimgD)
IF(GLIMAGE_LIBRARY_DEBUG)
	SET(GLIMAGE_LIBRARY optimized ${GLIMAGE_LIBRARY} debug ${GLIMAGE_LIBRARY_DEBUG})
ENDIF(GLIMAGE_LIBRARY_DEBUG)

MY_FIND_LIBRARY(ASSIMP_LIBRARY assimp)

MY_FIND_LIBRARY(ANTTWEAKBAR_LIBRARY AntTweakBar)


IF(NOT WIN32)
	FIND_PACKAGE(X11 REQUIRED)

	FIND_PACKAGE(OpenGL REQUIRED)
	ADD_DEFINITIONS(${OpenGL_DEFINITIONS})
	IF(NOT OPENGL_FOUND)
	    MESSAGE(ERROR " OPENGL not found!")
	ENDIF(NOT OPENGL_FOUND)

	MY_FIND_LIBRARY(PTHREAD_LIBRARY pthread)
ENDIF(NOT WIN32)

IF(GLIMAGE_INCLUDE_DIR AND BOOST_INCLUDE_DIR AND GLIMAGE_LIBRARY)
	SET(GLIMAGE_FOUND "YES")
ELSE(GLIMAGE_INCLUDE_DIR AND BOOST_INCLUDE_DIR AND GLIMAGE_LIBRARY)
	MESSAGE("GL Image is not found!!! Seminar 5 and later will not be built")
ENDIF(GLIMAGE_INCLUDE_DIR AND BOOST_INCLUDE_DIR AND GLIMAGE_LIBRARY)

IF(ASSIMP_INCLUDE_DIR AND ASSIMP_LIBRARY)
	SET(ASSIMP_FOUND "YES")
ELSE(ASSIMP_INCLUDE_DIR AND ASSIMP_LIBRARY)
	MESSAGE("Assimp library is not found!!! Seminar 7 and later will not be built")
ENDIF(ASSIMP_INCLUDE_DIR AND ASSIMP_LIBRARY)

IF(ANTTWEAKBAR_INCLUDE_DIR AND ANTTWEAKBAR_LIBRARY)
	SET(ANTTWEAKBAR_FOUND "YES")
ELSE(ANTTWEAKBAR_INCLUDE_DIR AND ANTTWEAKBAR_LIBRARY)
	MESSAGE("AntTweakBar library is not found!!! Seminar 7 and later will not be built")
ENDIF(ANTTWEAKBAR_INCLUDE_DIR AND ANTTWEAKBAR_LIBRARY)

SET(CMAKE_INCLUDE_PATH CACHE STRING "Put your include dir here...")
SET(CMAKE_LIBRARY_PATH CACHE STRING "Put your lib dir here...")

SET(CMAKE_DEBUG_POSTFIX "d")

INCLUDE_DIRECTORIES(
	${CMAKE_INCLUDE_PATH}
	${OpenGL_INCLUDE_DIRS}
	${GLEW_INCLUDE_DIR}
	${GLFW_INCLUDE_DIR}
	${GLM_INCLUDE_DIR}	
)

LINK_DIRECTORIES(
	${CMAKE_LIBRARY_PATH}
	${OpenGL_LIBRARY_DIRS}
)

IF(GLIMAGE_FOUND)
	INCLUDE_DIRECTORIES(${INCLUDE_DIRECTORIES}
		${GLIMAGE_INCLUDE_DIR}
		${BOOST_INCLUDE_DIR}
	)
ENDIF(GLIMAGE_FOUND)

IF(ASSIMP_FOUND)
	INCLUDE_DIRECTORIES(${INCLUDE_DIRECTORIES}
		${ASSIMP_INCLUDE_DIR}
	)
ENDIF(ASSIMP_FOUND)

IF(ANTTWEAKBAR_FOUND)
	INCLUDE_DIRECTORIES(${INCLUDE_DIRECTORIES}
		${ANTTWEAKBAR_INCLUDE_DIR}
	)
ENDIF(ANTTWEAKBAR_FOUND)

ADD_SUBDIRECTORY(seminar1)
ADD_SUBDIRECTORY(seminar2)
ADD_SUBDIRECTORY(seminar3)
ADD_SUBDIRECTORY(seminar4)
ADD_SUBDIRECTORY(seminar5)
ADD_SUBDIRECTORY(seminar6)
ADD_SUBDIRECTORY(seminar7)
ADD_SUBDIRECTORY(seminar8)

INSTALL(DIRECTORY ${CMAKE_SOURCE_DIR}/shaders/ DESTINATION ${CMAKE_INSTALL_PREFIX})
INSTALL(DIRECTORY ${CMAKE_SOURCE_DIR}/images/ DESTINATION ${CMAKE_INSTALL_PREFIX}/images)
